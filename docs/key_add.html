<html>
  <head>
    <title>Symplasm</title>
    <style>
      * {
        font-family: monospace;
      }

      .page {
        display: flex;
        flex-direction: column;
      }

      header {
        display: flex;
        align-items: center;
        padding: 0px 20px 0;
      }

      header h1 {
        margin: 0;
        padding-right: 10px;
      }

      header a {
        color: #08f;
        text-decoration: none;
        padding: 0px 10px;
      }

      header a:hover {
        text-decoration: underline;
      }
      
      .description {
        align-items: center;
        justify-content: center;
        padding: 0px 20px;
      }
      
      .converter {
        display: flex;
        flex: 1;
        align-items: center;
        justify-content: center;
        min-height: 300px;
      }
      .converter > div {
        display: flex;
        flex-direction: column;
        flex: 1;
        align-self: stretch;
        padding: 0px 20px;
      }

      .pane {
        padding: 10px;
        font-size: 1em;
        border: none;
        margin: 0px;
        outline: none;
        overflow: auto;
        background: #f1f1f1;
        padding: 10px;
        min-height: 300px;
      }
      
      .pane.exported {
        min-height: 150px;
        max-height: 150px;
      }
    
      .pane label {
        display: block;
        text-transform: uppercase;
        color: #555;
        margin-bottom: 5px;
      }

      #source {
        flex: 1;
        display: flex;
        align-self: stretch;
        border: none;
        background-color: transparent;
        outline: none;
        padding: 0px;
        font-size: inherit;
        min-height: 300px;
        max-width: 350px;
      }

      textarea {
        flex: 1;
        display: flex;
        align-self: stretch;
        width: 100vw;
        height: 175px;
        border: none;
        background-color: transparent;
        outline: none;
        padding: 0px;
        font-size: inherit;
        resize: none;
      }

      #output {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div class='page'>
      <header>
        <h1>Symplasm</h1>
        <a href='https://github.com/lancetipton/symplasm'>Symplasm on Github</a>
      </header>
      <div class='description'>
        <p>
          Export JSON in vDom format.
        </p>
      </div>
      <div class='converter'>
        <div>
          <label><b>HTML</b></label>
          <div class='pane pane-source'>
            <textarea id='source' placeholder='<div>HTML to transform</div>'>
<section class="super" >
  <input name="input-name-to-be-replaced" />
  <select name="select-name-to-be-replaced" >
    <option value="1" >1</option>
  </select>
  <button name="button-not-replaced" ></button>
</section>
            </textarea>
          </div>
        </div>
        <div>
          <label><b>JSON (ast)</b></label>
          <div class='pane pane-output'>
            <pre id='output'></pre>
          </div>
        </div>
        <div >
          <label><b>OPTIONS</b></label>
          <div class='pane pane-output'>
            <pre id="options" ></pre>
          </div>
        </div>
      </div>

      <br>
      <br>
      <br>
      <br>
      
      <div >
        <div >
          <label><b>Exported String</b></label>
          <div class='pane pane-source exported'>
            <div id="converted-html" ></div>
          </div>
        </div>
      </div>

      <br>
      <br>
      
      <div class='description' >
        <br>
        <h3>--------- API Methods ---------</h3>
        <div>
            <p>
              import <b>symplasm</b> from  <b>'./path/to/symplasm'</b>
              <br>
              <br>
              var code = symplasm.parse('html string', options)
              <br>
              var htmlString = symplasm.stringify('html string', options)
            </p>
        </div>
      </div>
      
      <div class='description' >
        <h3>--------- Symplasm Options ---------</h3>
        <div>
            <br/>
            &nbsp;&nbsp;trim: true, <b>// Removes all white-space</b>
            <br/>
            <br/>
            &nbsp;&nbsp;lowerCaseTag: false, <b>// Skips tag lowercase</b>
            <br/>
            <br/>
            &nbsp;&nbsp;root: {}, <b>// Override default root element, using vdom format. Children will be added before the parsed HTML</b>
            
            <textarea disabled >
              
    EXAMPLE:  {
                0: 'div',
                1: { class: 'root' },
                2: [ ...children ],
              },

            </textarea>
             &nbsp;&nbsp;tagConvert: {}, <b>// Key pair of html tag names, and how to convert them</b>
             <textarea disabled >
               
    EXAMPLE:  {
                div: 'View',
                img: {
                  0: 'Image',
                  1: { 
                    src: './image.png'
                  }
              }

              </textarea>
             &nbsp;&nbsp;attrKeyConvert: {}, <b>// Key pair of html attributes, and how to convert them</b>
             <textarea disabled >
               
    EXAMPLE:  {
                class: 'className',
                id: (element, key, value, allNodes, children, options) => {
                  return uuid.v4()
                }
              }

              </textarea>
             &nbsp;&nbsp;attrValueConvert: {}, <b>// Add key and value pair to html elements</b>
             <textarea disabled >
               
    EXAMPLE:  {
                'added-key': 'added-value',
                'added-object-key': {
                  tags: ['p'],
                  value: 'added-object-value'
                },
                'name': {
                  tags: ['input', 'select'],
                  value: function(element, key, value, allNodes, children, options){
                    return value + '-added-function-value'
                  }
                },
              }

              </textarea>
        </div>
      </div>
    </div>

    <script src='dist/symplasm.js'></script>
    <script>
      var counter = 0
      
      var buttonClick = function(event){
        console.log('------------------button click------------------');
        console.log(event);
      }
      
      function $ (selector) {
        return document.querySelector(selector)
      }
      var options = {
        trim: true,
        lowerCaseTag: false,
        root: {
          0: 'article',
          1: { class: 'duper' },
          2: [{
            0: 'div',
            1: { class: 'added-child' },
            2: 'Sub-Sub-Added Child'
          }],
        },
        tagConvert: {
          'button': {
            0: 'button',
            1: { class: 'replace-button' },
            2: 'Click Me'
          },
          'section': function(element, key, value, allNodes, children, options){
            return {
              0: 'div',
              1: { class: 'replace-section-with-div' },
              2: 'Added Div'
            }
          },
        },
        attrValueConvert: {
          'replace-attr-value': 'replaced-attribute',
          id: function(element, key, value, allNodes, children, options){
            return 'td-' + counter++
          },
          name: {
            tags: ['input', 'select'],
            value: function(element, key, value, allNodes, children, options){
              return 'name-was-replaced'
            }
          }
        },
        attrKeyAdd: {
          'onclick': {
            tags: ['button'],
            value: 'buttonClick(event)'
          },
          'added-key-function': {
            tags: ['select', 'input'],
            value: function(element, key, value, allNodes, children, options){
              return 'added-function-value'
            }
          }
        }
      }

      function updateOutput () {
        var html = $('#source').value || ''
        var code = symplasm.parse(html, options)
        $('#output').innerText = JSON.stringify(code, null, 2)
        var htmlString = symplasm.stringify(code)
        $('#converted-html').innerHTML = htmlString
        $('#converted-html').append(htmlString)
      }

      $('#options').innerText = JSON.stringify(options, null, 2)
      $('#source').onkeyup = updateOutput
      updateOutput()

    </script>
  </body>
</html>
