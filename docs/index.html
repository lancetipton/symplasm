<html>
  <head>
    <title>Symplasm</title>
    <style>
      * {
        font-family: monospace;
      }

      .page {
        display: flex;
        flex-direction: column;
      }

      header {
        display: flex;
        align-items: center;
        padding: 0px 20px 0;
      }

      header h1 {
        margin: 0;
        padding-right: 10px;
      }

      header a {
        color: #08f;
        text-decoration: none;
        padding: 0px 10px;
      }

      header a:hover {
        text-decoration: underline;
      }
      
      .description {
        align-items: center;
        justify-content: center;
        padding: 0px 20px;
      }
      
      .converter {
        display: flex;
        flex: 1;
        align-items: center;
        justify-content: center;
        min-height: 300px;
      }
      .converter > div {
        display: flex;
        flex-direction: column;
        flex: 1;
        align-self: stretch;
        padding: 0px 20px;
      }

      .pane {
        padding: 10px;
        font-size: 1em;
        border: none;
        margin: 0px;
        outline: none;
        overflow: auto;
        background: #f1f1f1;
        padding: 10px;
        min-height: 300px;
      }

      .pane label {
        display: block;
        text-transform: uppercase;
        color: #555;
        margin-bottom: 5px;
      }

      #source {
        flex: 1;
        display: flex;
        align-self: stretch;
        border: none;
        background-color: transparent;
        outline: none;
        padding: 0px;
        font-size: inherit;
      }

      textarea {
        flex: 1;
        display: flex;
        align-self: stretch;
        width: 350px;
        height: 175px;
        border: none;
        background-color: transparent;
        outline: none;
        padding: 0px;
        font-size: inherit;
        resize: none;
      }

      #output {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div class='page'>
      <header>
        <h1>Symplasm</h1>
        <a href='https://github.com/lancetipton/symplasm'>Symplasm on Github</a>
      </header>
      <div class='description'>
        <p>
          Export JSON in vDom format.
        </p>
      </div>
      <div class='converter'>
        <div>
          <label><b>HTML</b></label>
          <div class='pane pane-source'>
            <textarea id='source' placeholder='<div>HTML to transform</div>'>
<div class="super" id="duper" style="font-family:'Helvetica Bold';" >
  <h3 id="bar" >I should be h1</h3>
  <img src="./foo-bar.jpg" >
  <p class="foo" style="color:blue; background-color:green; margin-top:20px;" >
    I should be a span
    <div name="I get replaced" >I should exist</div>
  </p>
</div>
            </textarea>
          </div>
        </div>
        <div>
          <label><b>JSON (ast)</b></label>
          <div class='pane pane-output'>
            <pre id='output'></pre>
          </div>
        </div>
        <div >
          <label><b>OPTIONS</b></label>
          <div class='pane pane-output'>
            <pre id="options" ></pre>
          </div>
        </div>
      </div>

      <br>
      <br>
      <br>
      <br>
      
      <div >
        <div >
          <label><b>Exported String</b></label>
          <div class='pane pane-source'>
            <div id="converted-html" ></div>
          </div>
        </div>
      </div>

      <br>
      <br>
      
      <div class='description' >
        <br>
        <h3>--------- API Methods ---------</h3>
        <div>
            <p>
              import <b>symplasm</b> from  <b>'./path/to/symplasm'</b>
              <br>
              <br>
              var code = symplasm.parse('html string', options)
              <br>
              var htmlString = symplasm.stringify('html string', options)
            </p>
        </div>
      </div>
      
      <div class='description' >
        <h3>--------- Symplasm Options ---------</h3>
        <div>
            <br/>
            &nbsp;&nbsp;trim: true, <b>// Removes all white-space</b>
            <br/>
            <br/>
            &nbsp;&nbsp;lowerCaseTag: false, <b>// Skips tag lowercase</b>
            <br/>
            <br/>
            &nbsp;&nbsp;root: {}, <b>// Override default root element, using vdom format. Children will be added before the parsed HTML</b>
            
            <textarea disabled >
              
    EXAMPLE:  {
                0: 'div',
                1: { class: 'root' },
                2: [ ...children ],
              },

            </textarea>
            <br/>
            <br/>
             &nbsp;&nbsp;tagConvert: {}, <b>// Key pair of html tag names, and how to convert them</b>
             <textarea disabled >
               
    EXAMPLE:  {
                div: 'View',
                img: {
                  0: 'Image',
                  1: { 
                    src: './image.png'
                  }
              }

              </textarea>
            <br/>
             &nbsp;&nbsp;attrKeyConvert: {}, <b>// Key pair of html attributes, and how to convert them</b>
             <textarea disabled >
               
    EXAMPLE:  {
                class: 'className',
                id: () => {
                  return uuid.v4()
                }
              }

              </textarea>
            <br/>
        </div>
      </div>
    </div>

    <script src='dist/symplasm.js'></script>
    <script>
      var counter = 0
      function $ (selector) {
        return document.querySelector(selector)
      }
      var options = {
        trim: true,
        lowerCaseTag: false,
        root: {
          0: 'article',
          1: { class: 'duper' },
          2: [{
            0: 'div',
            1: { class: 'added-child' },
            2: 'Sub-Sub-Added Child'
          }],
        },
        tagConvert: {
          article: 'section',
          img: {
            0: 'Image',
            1: { 
              src: './image.png'
            }
          },
          p: {
            0: 'span',
            1: { class: 'converted' },
            2: 'I get added as the first child to the span'
          },
          h3: function(element, key, value, allNodes, children, options){
            return 'h1'
          }
        },
        attrKeyConvert: {
          class: 'className',
          id: function(element, key, value, allNodes, children, options){
            return 'td-id'
          }
        },
        attrValueConvert: {
          name: 'replaced-attribute',
          id: function(element, key, value, allNodes, children, options){
            return 'td-' + counter++
          }
        }
      }

      function updateOutput () {
        var html = $('#source').value || ''
        var code = symplasm.parse(html, options)
        $('#output').innerText = JSON.stringify(code, null, 2)
        $('#converted-html').innerText = symplasm.stringify(code)
      }

      $('#options').innerText = JSON.stringify(options, null, 2)
      $('#source').onkeyup = updateOutput
      updateOutput()
    </script>
  </body>
</html>
