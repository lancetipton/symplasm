<html>
  <head>
    <title>Symplasm</title>
    <style>
      * {
        font-family: monospace;
      }

      .page {
        display: flex;
        flex-direction: column;
      }

      header {
        display: flex;
        align-items: center;
        padding: 0px 20px 0;
      }

      header h1 {
        margin: 0;
        padding-right: 10px;
      }

      header a {
        color: #08f;
        text-decoration: none;
        padding: 0px 10px;
      }

      header a:hover {
        text-decoration: underline;
      }
      
      .description {
        align-items: center;
        justify-content: center;
        padding: 0px 20px;
      }
      
      .converter {
        display: flex;
        flex: 1;
        align-items: center;
        justify-content: center;
        min-height: 300px;
      }
      .converter > div {
        display: flex;
        flex-direction: column;
        flex: 1;
        align-self: stretch;
        padding: 0px 20px;
      }

      .pane {
        padding: 10px;
        font-size: 1em;
        border: none;
        margin: 0px;
        outline: none;
        overflow: auto;
        background: #f1f1f1;
        padding: 10px;
        min-height: 300px;
      }
      
      .pane.exported {
        min-height: 150px;
        max-height: 150px;
      }
    
      .pane label {
        display: block;
        text-transform: uppercase;
        color: #555;
        margin-bottom: 5px;
      }

      #source {
        flex: 1;
        display: flex;
        align-self: stretch;
        border: none;
        background-color: transparent;
        outline: none;
        padding: 0px;
        font-size: inherit;
        min-height: 300px;
        width: 350px;
        font-size: inherit;
        resize: none;
      }

      #output {
        margin: 0;
        padding: 0;
      }
      
      .display {
        padding: 0 20px;
      }
      
    </style>
  </head>
  <body>
    <div class='page'>
      <header>
        <h1>Symplasm</h1>
        <a href='https://github.com/lancetipton/symplasm'>Symplasm on Github</a>
      </header>
      <div class='description'>
        <p>
          Export JSON in vDom format.
        </p>
      </div>
      <div class='converter'>
        <div>
          <label><b>HTML</b></label>
          <div class='pane pane-source'>

<!-- 
<select class="class-select" id="super-select" name="select-to-be-replaced" /></select>
<button class="td-button" td-button="false" ></button>
<div class="td-div" td-root ></div>
<input id="td-first-input"  />
 -->

            <textarea id='source' placeholder='<div>HTML to transform</div>'>

<input class="class-input" id="super-input" name="input-to-be-replaced" />
<select class="class-select" id="super-select" name="select-to-be-replaced" >
  <option value="1" >1</option>
</select>
<!-- I am comment -->
<button class="td-button" td-button="false" ></button>
<div class="td-div" td-root ></div>
<input id="td-first-input"  />
            </textarea>
          </div>
        </div>
        <div>
          <label><b>JSON Export</b></label>
          <div class='pane pane-output'>
            <pre id='output'></pre>
          </div>
        </div>
      </div>

      <br>
      <br>
      <br>
      <br>
      
      <div class="display" >
        <div >
          <label><b>Converted to HTML</b></label>
          <div class='pane pane-source exported'>
            <div id="converted-html" ></div>
          </div>
          <br>
          <br>
          <br>
          <label><b>Settings</b></label>
          <div class='pane pane-output'>
            <pre id='settings'></pre>
          </div>
        </div>
      </div>
      
    </div>



    <script src='dist/symplasm.js'></script>
    <script>
      var counter = 0
      
      var buttonClick = function(event){
        console.log('------------------button click------------------');
        console.log(event);
      }
      
      function $ (selector) {
        return document.querySelector(selector)
      }
      
      var options = {
        trim: true,
        lowerCaseTag: false,
        comments: false,
        root: {
          0: 'article',
          1: {
            class: 'foo',
            style: {
              backgroundColor: 'green',
              marginTop: '10px',
            }
          },
          2: [{
            0: 'div',
            1: { class: 'added-child' },
            2: 'Sub-Sub-Added Child'
          }],
        },
        tagConvert: {
          input: {
            0: 'input',
            1: {
              style: {
                backgroundColor: 'green',
                marginTop: '10px',
              }
            }
          },
          article: 'section',
          'button.td-button': {
            0: 'div',
            1: {
              class: 'td-button-reaplce-div',
            },
            2: [
              {
                0: 'div',
                1: { class: 'sub-added-div' },
                2: 'Button Text'
              }
            ]
          },
          'input#super-input': function(element, key, value, allNodes, children, options){
            return {
              0: 'TDInput',
              1: {
                class: 'td-super-input'
              }
            }
          }
        },
        attrKeyConvert: {
          class: 'className',
          id: {
            input: function(element, key, value, allNodes, children, options){
              return 'td-input'
            },
            select: 'td-select'
          },
          name: {
            selector: ['input#super-input', 'select'],
            value: function(element, key, value, allNodes, children, options){
              return 'td-' + key
            }
          }
        },
        attrValueConvert: {
          class: {
            'button[td-button],div[td-root]': function(element, key, value, allNodes, children, options){
              return 'td-replaced-' + element[0]
            },
          },
          name: {
            input: function(element, key, value, allNodes, children, options){
              return 'td-' + element[0]
            },
            'select.class-select': 'td-select-name'
          }
        },
        attrKeyAdd: {
          'onclick': {
            selector: ['button[td-button]'],
            value: 'buttonClick(event)'
          },
          'added-key-function': {
            'input.class-input': function(element, key, value, allNodes, children, options){
              return 'added-function-value'
            }
          }
        }
      }

      function updateOutput () {
        var html = $('#source').value || ''
        var code = symplasm.parse(html, options)
        $('#output').innerText = JSON.stringify(code, null, 2)
        var htmlString = symplasm.stringify(code)
        $('#converted-html').innerHTML = htmlString
        $('#settings').innerText = JSON.stringify(options, null, 2)
      }

      $('#source').onkeyup = updateOutput
      updateOutput()
      ;</script>
    
  </body>
</html>
